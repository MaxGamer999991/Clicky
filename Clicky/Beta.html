<!DOCTYPE html>
<html style="font-family: sans-serif; touch-action: manipulation; zoom: 1.5; overflow-y: scroll;">
	<head>
		<title>Clicky v6.0</title>
		<link rel="icon" href="https://raw.githubusercontent.com/MaxGamer999991/Max-Game/main/Clicky/Original.png">
	</head>
	<style>
		.Fenster {
			margin: 10px;
			padding: 5px;
			background-color: lightgray;
			border-radius: 10px;
		}
		.Head {
			margin-block: 0px;
			padding: 10px;
			cursor: pointer;
			border-radius: 10px;
			background: darkgray;
		}
		.Button {
			margin: 2px;
			font-size: large;
			border: darkgray;
			border-width: 3px;
			border-style: solid;
			border-radius: 10px;
			cursor: pointer;
		}
	</style>
	<body>
		<div>

		</div>
		<h1 style="text-align: center;">Clicky</h1>

		<div id="M_Einstelung">
			<div>
				<button onclick="Save()">Speichern Cloud</button>
				<button onclick="Load()">Laden Cloud</button>
			</div>
			<div>
				<button onclick="Save_als()">Speichern Datai</button>
				<button onclick="Load_als()">Laden Datai</button>
			</div>
		</div>

		<div>
			<div style="
				position: fixed;
				display: flex;
				padding-block: 5px;
				justify-content: center;
				left: 0px;
				right: 0px;
				bottom: 0px;
				background: lightgray;
			">
				<button style="position: relative; bottom: 0px;" id="Tab_I1" onclick="Auswahl = 1; update()" class="Button">Home</button>
				<button style="position: relative; bottom: 0px;" id="Tab_I2" onclick="Auswahl = 2; update()" class="Button">Upgrade</button>
				<button style="position: relative; bottom: 0px;" id="Tab_I3" onclick="Auswahl = 3; update()" class="Button">Shop</button>
				<button style="position: relative; bottom: 0px;" id="Tab_I4" onclick="Auswahl = 4; update()" class="Button">Level</button>
				<button style="position: relative; bottom: 0px;" id="Tab_I5" onclick="Auswahl = 5; update()" class="Button">Rang</button>
				<button style="position: relative; bottom: 0px;" id="Tab_I6" onclick="Auswahl = 6; update()" class="Button">Einstelung</button>
			</div>
		</div>
	</body>
</html>
<script>

	var Auswahl = 1;
	var Game = {
		Coin : 0,

		Eistelungen : false,
		Status : {
			Coin : 0,
			Click : 0,
			Multi : 0,
			Multi_max : 0,
			Rebirth : 0,
			Rebirth_max : 0,
			S_Coin : 0,
			Combo : 0,
			Combo_max : 0,
		},

		Multi : {
			Offen : false,
			Anzahl : 1,
			Costen : 10,
			Rabat : 0,
			Auto : false
		},
		Rebirt : {
			Offen : false,
			Anzahl : 0,
			Costen : 160,
			Rabat : 0,
			Auto : false
		},

		Level : 0,

		S_Coin : {
			Offen : false,
			Anzahl : 0,
			Auto : false
		},

		Crit : 0,
	}

	function Level_() {
		input = "L1";
		if (Level.L1) {input = "L2"}
		if (input == "L1") {
			return {
				Level : "0",
				Costentext : `${Rebirth.Anzahl}/5 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 5,
				Belonung : "Multi Alles Kaufen, Automatisch Rebirth",
				Don : (Rebirth.Anzahl >= 5)}
		}
		if (Level.L2) {input = "L3"}
		if (input == "L2") {
			return {
				Level : "1",
				Costentext : `${Rebirth.Anzahl}/15 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 15,
				Belonung : "Auto Multi Kaufen, Laden",
				Don : (Rebirth.Anzahl >= 15)}
		}
		if (Level.L3) {input = "L4"}
		if (input == "L3") {
			return {
				Level : "2",
				Costentext : `${Rebirth.Anzahl}/25 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 25,
				Belonung : "Super Rebirth",
				Don : (Rebirth.Anzahl >= 25)}
		}
		if (Level.L4) {input = "L5"}
		if (input == "L4") {
			return {
				Level : "3",
				Costentext : `${Rebirth.Anzahl}/50 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 50,
				Belonung : "Rang 1",
				Don : (Rebirth.Anzahl >= 50)}
		}
		if (Level.L5) {input = "L6"}
		if (input == "L5") {
			return {
				Level : "4",
				Costentext : `${Rebirth.Anzahl}/75 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 75,
				Belonung : "Rang 2",
				Don : (Rebirth.Anzahl >= 75)}
		}
		if (Level.L6) {input = "L7"}
		if (input == "L6") {
			return {
				Level : "5",
				Costentext : `${Rebirth.Anzahl}/100 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 100,
				Belonung : "Rang 3",
				Don : (Rebirth.Anzahl >= 100)}
		}
		if (Level.L7) {input = "L8"}
		if (input == "L7") {
			return {
				Level : "6",
				Costentext : `${Rebirth.Anzahl}/150 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 150,
				Belonung : "Rang 4",
				Don : (Rebirth.Anzahl >= 150)}
		}
		if (Level.L8) {input = "L9"}
		if (input == "L8") {
			return {
				Level : "7",
				Costentext : `${Rebirth.Anzahl}/200 Rebirth`,
				Costen : Rebirth.Anzahl,
				Costen1 : 200,
				Belonung : "Rang 5",
				Don : (Rebirth.Anzahl >= 200)}
		}
		return {
			Costentext : "Das Ende",
			Costen : 0,
			Costen1 : 1,
			Belonung : "",
			Don : false,
			Level : ""}
	}
	function zahl(input) {
		input = Math.round(input)
		if (input < Math.pow(10, 21)) {
			var Var1 = "";
				var ii = 0;
				for (var i = String(input).length - 1; i >= 0; i--) {
					if (ii >= 3) {
						Var1 = String(input)[i] + "." + Var1;
						ii = 0;
					} else {
						Var1 = String(input)[i] + Var1;
					}
					ii++;
				}
				return Var1
		} else {return input}
	}


	function update() {
		// document.getElementById

		for (let i = 1; i <= 6; i++) {
			if (Auswahl == i) {
				document.getElementById(`Tab_I${i}`).style.bottom = "2px"
			} else {
				document.getElementById(`Tab_I${i}`).style.bottom = "0px"
			}
		}
		if (Auswahl == 6) {
			document.getElementById("M_Einstelung").style.display = "block"
		} else {
			document.getElementById("M_Einstelung").style.display = "none"
		}
	}


	function Click() {
		let Crit_Multi = 1
		while (Math.round(Math.random() * 100) < Crit - ((Crit_Multi - 1) * 10)) {Crit_Multi += 1}
		Coin += (Multi.Anzahl * Math.pow(2, Rebirth.Anzahl)) * Math.pow(2, Crit_Multi - 1);
		Status.Coin += (Multi.Anzahl * Math.pow(2, Rebirth.Anzahl)) * Math.pow(2, Crit_Multi - 1);
		Status.Click += 1;
		if (Crit_Multi > 1) {
			document.getElementById("Click").textContent = `Click (Combo: ${Math.pow(2, Crit_Multi - 1)}x)`;
			Status.Combo_max = Math.max(Status.Combo_max, Math.pow(2, Crit_Multi - 1))
			Status.Combo += 1
		} else {
			document.getElementById("Click").textContent = `Click`;
		}

		update()
	}


	function Save() {
		localStorage.setItem("Game", JSON.stringify({Data : Game, Version : 6}))
	}
	function Load() {
		let Da = JSON.parse(localStorage.getItem("Game"))
		if (Da.Version == 6) {
			Game = Da.Data
		}
	}
	function Save_als() {
		const url = URL.createObjectURL(new Blob([JSON.stringify({Data : Game, Version : 6})]))

		const a = document.createElement("a");
        a.href = url;
        a.download = `Clicky v6.max-game`;
        a.click();

		URL.revokeObjectURL(url);
	}
	function Load_als() {
		const input = document.createElement("input");
		input.type = "file";
		input.accept = ".max-game";
		
		input.addEventListener("change", (event) => {
			const file = event.target.files[0];
			
			const reader = new FileReader();
			reader.onload = () => {
					Game = JSON.parse(reader.result).Data
					update()
				}
				reader.readAsText(file);
			})
			input.click();
	}
	function Not_Save() {
		if (confirm("Wilst du speichern")) {
			Save_als()
		} else {
			if (confirm("Wirklich nicht Speichern")) {
				Save_als()
			}
		}
	}
	onbeforeunload = Not_Save;
	Load()

	window.addEventListener("resize", function() {
		document.body.style.zoom = Math.min(1, window.innerWidth / (1920 / 2));
	});

	update()
</script>